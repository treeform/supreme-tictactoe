<!DOCTYPE HTML>
<html>

<head>
	<title>supreme tic tac toe</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<link href="style.css" rel="stylesheet" type="text/css" /> 
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" ></script>
    
<script type="text/javascript">

var c=0;
var t;

function ping() {
    c=c+1;
    var t=setTimeout("ping()",1000);
    $.getJSON('status.json?id='+$("#id").val(), function(data) {
    
        if( data.finished ){
            $('#finished').show();
            $('#finished').html(data.finished);
        }
    
        $('#message').html(data.message);
        var x = 0;
        for(var ridx in data.grid){
            var r = data.grid[ridx];
            var y = 0;
            for(markidx in r){
                var mark = r[markidx];
                $(("#"+x)+y).html(mark);
                y ++;
            }
            x ++;        
        }
        
    });
}

$(document).ready(function(){

    $("#finished").click(function(event){
        $("#finished").hide();
        $("#id").val(Math.random());
    });
    $("td").click(function(event){
        $.getJSON('pick.json?xy='+this.id+'&id='+$("#id").val(), 
            function(data) {
                //$('#message').html(data.picked);
        });
    });
    ping();
});
</script>
    
</head>

<body>
    <h1>supreme tic tac toe</h1>
    <input type="hidden" id="id" value="{{id}}">
    <div id="finished"></div>
    <table>
        <tr><td id="00"></td><td id="01"></td><td id="02"></td></tr>
        <tr><td id="10"></td><td id="11"></td><td id="12"></td></tr>
        <tr><td id="20"></td><td id="21"></td><td id="22"></td></tr>
    </table>
    <p id="message">waiting for some one to connect ...</p>
</body>

</html>
